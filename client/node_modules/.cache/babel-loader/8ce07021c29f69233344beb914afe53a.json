{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{Functions}from'../body/Functions';import'./Navigation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";window.onclick=function(event){var targetImg=document.querySelector('.clicked-img');var editMenu=document.querySelector('.edit-menu');if(!editMenu)return;var editMenuArr=[editMenu,editMenu.children[0],editMenu.children[1]];var isClickEditMenu=editMenuArr.some(function(ele){return ele===event.target;});if(!targetImg||isClickEditMenu)return;// target이 editMenu일 때는 함수 종료\nif(event.target!==targetImg){editMenu.classList.add('invisible');targetImg.classList.remove('clicked-img');}};var useBrowser=function useBrowser(){var element=useRef();var clickbrowser=function clickbrowser(){return element.current.click();};var readFile=function readFile(){var contents=document.querySelector('.contents-div');if(!contents)return;var content=contents.children[0];// book-div or movie-div\nvar file=element.current.files[0];if(!file)return;if(!file.type.startsWith('image/')&&file!==null)window.alert('이미지 파일만 선택해주십시오.');else{var reader=new FileReader();reader.onload=function(){if(content.classList.contains('book-div')){var bookList=JSON.parse(localStorage.getItem('book'));if(!bookList)bookList=[];Functions().addBook(reader.result,bookList,'');}if(content.classList.contains('movie-div')){var movieList=JSON.parse(localStorage.getItem('movie'));if(!movieList)movieList=[];Functions().addMovie(reader.result,movieList,'');}};reader.readAsDataURL(file);}};useEffect(function(){var current=element.current;current.addEventListener('change',readFile);return function(){return current.removeEventListener('change',readFile);};},[]);return{element:element,clickbrowser:clickbrowser};};var Search=function Search(){var _useBrowser=useBrowser(),element=_useBrowser.element,clickbrowser=_useBrowser.clickbrowser;return/*#__PURE__*/_jsxs(\"div\",{className:\"dropDown\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-browser\",ref:element}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-icon browseIcon\",onClick:clickbrowser,children:\"\\uD83D\\uDCC2\"})]});};export default Search;","map":{"version":3,"sources":["/Users/hoon/Documents/memory_space/src/home/header/Search.js"],"names":["React","useRef","useEffect","Functions","window","onclick","event","targetImg","document","querySelector","editMenu","editMenuArr","children","isClickEditMenu","some","ele","target","classList","add","remove","useBrowser","element","clickbrowser","current","click","readFile","contents","content","file","files","type","startsWith","alert","reader","FileReader","onload","contains","bookList","JSON","parse","localStorage","getItem","addBook","result","movieList","addMovie","readAsDataURL","addEventListener","removeEventListener","Search"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { Functions } from '../body/Functions';\nimport './Navigation';\n\nwindow.onclick = (event) => {\n  const targetImg = document.querySelector('.clicked-img');\n  const editMenu = document.querySelector('.edit-menu');\n  if (!editMenu) return;\n  const editMenuArr = [editMenu, editMenu.children[0], editMenu.children[1]];\n  const isClickEditMenu = editMenuArr.some((ele) => ele === event.target);\n  if (!targetImg || isClickEditMenu) return; // target이 editMenu일 때는 함수 종료\n  if (event.target !== targetImg) {\n    editMenu.classList.add('invisible');\n    targetImg.classList.remove('clicked-img');\n  }\n};\n\nconst useBrowser = () => {\n  const element = useRef();\n  const clickbrowser = () => element.current.click();\n  const readFile = () => {\n    const contents = document.querySelector('.contents-div');\n    if (!contents) return;\n    const content = contents.children[0]; // book-div or movie-div\n    const file = element.current.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/') && file !== null)\n      window.alert('이미지 파일만 선택해주십시오.');\n    else {\n      const reader = new FileReader();\n      reader.onload = function () {\n        if (content.classList.contains('book-div')) {\n          let bookList = JSON.parse(localStorage.getItem('book'));\n          if (!bookList) bookList = [];\n          Functions().addBook(reader.result, bookList, '');\n        }\n        if (content.classList.contains('movie-div')) {\n          let movieList = JSON.parse(localStorage.getItem('movie'));\n          if (!movieList) movieList = [];\n          Functions().addMovie(reader.result, movieList, '');\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  useEffect(() => {\n    const { current } = element;\n    current.addEventListener('change', readFile);\n    return () => current.removeEventListener('change', readFile);\n  }, []);\n  return { element, clickbrowser };\n};\n\nconst Search = () => {\n  const { element, clickbrowser } = useBrowser();\n  return (\n    <div className=\"dropDown\">\n      <input type=\"file\" id=\"file-browser\" ref={element} />\n      <button className=\"nav-icon browseIcon\" onClick={clickbrowser}>\n        📂\n      </button>\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}