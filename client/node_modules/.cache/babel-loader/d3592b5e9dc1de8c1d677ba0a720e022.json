{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hoon/Documents/memory_space/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hoon/Documents/memory_space/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useRef}from'react';import{Functions}from'../body/Functions';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var addImg=function addImg(img,search){console.log('바뀜');var book_data=JSON.parse(localStorage.getItem('book'));if(!book_data)book_data=[];removeBackground();Functions().addBook(img,book_data,'');search.value='';};var removeBackground=function removeBackground(){var background=document.querySelector('.background');if(background)background.parentNode.removeChild(background);};var getApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchText,category){var apiData,key,_yield$axios$get,documents,content,background,blurImg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:removeBackground();if(!(category==='book')){_context.next=8;break;}key='45fe65b5c3fbd3d400ad5daa0f415552';_context.next=5;return axios.get('https://dapi.kakao.com/v3/search/book',{params:{query:searchText.value,size:3},headers:{Authorization:'KakaoAK '+key}});case 5:_yield$axios$get=_context.sent;documents=_yield$axios$get.data.documents;apiData=documents;case 8://   else {\n// const movieKey = 'ba3df35e-a977-4146-b14a-d57e13e0cfa8';\n// const data = await axios.get(\n//   'http://api.kcisa.kr/openapi/service/rest/meta14/getKMPC031801',\n//   {\n//     params: {\n//       serviceKey: movieKey,\n//       numOfRows: 3,\n//       title: searchText.value,\n//     },\n//   }\n// );\n// apiData = movieList;\n// console.log(data.data.response.body.items.item);\n//   }\ncontent=document.querySelector('.contents-div').children[0];background=document.createElement('div');blurImg=document.createElement('img');background.appendChild(blurImg);background.classList.add('background');blurImg.classList.add('blurImg');content.insertBefore(background,content.firstChild);if(category==='book'){apiData.forEach(function(ele){var div=document.createElement('div');div.classList.add('preview');var img=document.createElement('img');var text=document.createElement('span');div.appendChild(img);div.appendChild(text);img.src=ele.thumbnail;img.addEventListener('click',function(){return addImg(ele.thumbnail,searchText);});text.innerText=ele.title;background.appendChild(div);});}// else {\n//   apiData.forEach((ele) => {\n//     const div = document.createElement('div');\n//     div.classList.add('preview');\n//     const img = document.createElement('img');\n//     const text = document.createElement('span');\n//     div.appendChild(img);\n//     div.appendChild(text);\n//     img.src = ele.thumbnail;\n//     img.addEventListener('click', () => addImg(ele.thumbnail, searchText));\n//     text.innerText = ele.title;\n//     background.appendChild(div);\n//   });\n// }\ncase 16:case\"end\":return _context.stop();}}},_callee);}));return function getApi(_x,_x2){return _ref.apply(this,arguments);};}();var showSearch=function showSearch(target,category){var current=target.current;current.classList.toggle('invisible');//   const dropDown = document.querySelector('.dropDown-menu');\ncurrent.addEventListener('keypress',function(e){if(e.key==='Enter')getApi(current,category);});current.focus();};export var SearchText=function SearchText(){var target=useRef();useEffect(function(){var searchBook=document.querySelector('.dropDown-book');var searchMovie=document.querySelector('.dropDown-movie');searchBook.addEventListener('click',function(){return showSearch(target,'book');});searchMovie.addEventListener('click',function(){return showSearch(target,'movie');});return function(){searchBook.removeEventListener('click',function(){return showSearch(target);});searchMovie.removeEventListener('click',function(){return showSearch(target);});};});return/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"searchText invisible\",ref:target});};","map":{"version":3,"sources":["/Users/hoon/Documents/memory_space/src/home/header/SearchText.js"],"names":["React","useEffect","useRef","Functions","axios","addImg","img","search","console","log","book_data","JSON","parse","localStorage","getItem","removeBackground","addBook","value","background","document","querySelector","parentNode","removeChild","getApi","searchText","category","key","get","params","query","size","headers","Authorization","documents","data","apiData","content","children","createElement","blurImg","appendChild","classList","add","insertBefore","firstChild","forEach","ele","div","text","src","thumbnail","addEventListener","innerText","title","showSearch","target","current","toggle","e","focus","SearchText","searchBook","searchMovie","removeEventListener"],"mappings":"uOAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,KAAyC,OAAzC,CACA,OAASC,SAAT,KAA0B,mBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,GAAD,CAAMC,MAAN,CAAiB,CAC9BC,OAAO,CAACC,GAAR,CAAY,IAAZ,EACA,GAAIC,CAAAA,SAAS,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAhB,CACA,GAAI,CAACJ,SAAL,CAAgBA,SAAS,CAAG,EAAZ,CAChBK,gBAAgB,GAChBZ,SAAS,GAAGa,OAAZ,CAAoBV,GAApB,CAAyBI,SAAzB,CAAoC,EAApC,EACAH,MAAM,CAACU,KAAP,CAAe,EAAf,CACD,CAPD,CASA,GAAMF,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAMG,CAAAA,UAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB,CACA,GAAIF,UAAJ,CAAgBA,UAAU,CAACG,UAAX,CAAsBC,WAAtB,CAAkCJ,UAAlC,EACjB,CAHD,CAKA,GAAMK,CAAAA,MAAM,0FAAG,iBAAOC,UAAP,CAAmBC,QAAnB,wLACbV,gBAAgB,GADH,KAGTU,QAAQ,GAAK,MAHJ,0BAILC,GAJK,CAIC,kCAJD,uBAODtB,CAAAA,KAAK,CAACuB,GAAN,CAAU,uCAAV,CAAmD,CAC3DC,MAAM,CAAE,CACNC,KAAK,CAAEL,UAAU,CAACP,KADZ,CAENa,IAAI,CAAE,CAFA,CADmD,CAK3DC,OAAO,CAAE,CACPC,aAAa,CAAE,WAAaN,GADrB,CALkD,CAAnD,CAPC,uCAMDO,SANC,kBAMTC,IANS,CAMDD,SANC,CAgBXE,OAAO,CAAGF,SAAV,CAhBW,OAkBb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACMG,OAjCO,CAiCGjB,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCiB,QAAxC,CAAiD,CAAjD,CAjCH,CAkCPnB,UAlCO,CAkCMC,QAAQ,CAACmB,aAAT,CAAuB,KAAvB,CAlCN,CAmCPC,OAnCO,CAmCGpB,QAAQ,CAACmB,aAAT,CAAuB,KAAvB,CAnCH,CAoCbpB,UAAU,CAACsB,WAAX,CAAuBD,OAAvB,EACArB,UAAU,CAACuB,SAAX,CAAqBC,GAArB,CAAyB,YAAzB,EACAH,OAAO,CAACE,SAAR,CAAkBC,GAAlB,CAAsB,SAAtB,EACAN,OAAO,CAACO,YAAR,CAAqBzB,UAArB,CAAiCkB,OAAO,CAACQ,UAAzC,EACA,GAAInB,QAAQ,GAAK,MAAjB,CAAyB,CACvBU,OAAO,CAACU,OAAR,CAAgB,SAACC,GAAD,CAAS,CACvB,GAAMC,CAAAA,GAAG,CAAG5B,QAAQ,CAACmB,aAAT,CAAuB,KAAvB,CAAZ,CACAS,GAAG,CAACN,SAAJ,CAAcC,GAAd,CAAkB,SAAlB,EACA,GAAMpC,CAAAA,GAAG,CAAGa,QAAQ,CAACmB,aAAT,CAAuB,KAAvB,CAAZ,CACA,GAAMU,CAAAA,IAAI,CAAG7B,QAAQ,CAACmB,aAAT,CAAuB,MAAvB,CAAb,CACAS,GAAG,CAACP,WAAJ,CAAgBlC,GAAhB,EACAyC,GAAG,CAACP,WAAJ,CAAgBQ,IAAhB,EACA1C,GAAG,CAAC2C,GAAJ,CAAUH,GAAG,CAACI,SAAd,CACA5C,GAAG,CAAC6C,gBAAJ,CAAqB,OAArB,CAA8B,iBAAM9C,CAAAA,MAAM,CAACyC,GAAG,CAACI,SAAL,CAAgB1B,UAAhB,CAAZ,EAA9B,EACAwB,IAAI,CAACI,SAAL,CAAiBN,GAAG,CAACO,KAArB,CACAnC,UAAU,CAACsB,WAAX,CAAuBO,GAAvB,EACD,CAXD,EAYD,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnEa,uDAAH,kBAANxB,CAAAA,MAAM,gDAAZ,CAsEA,GAAM+B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,MAAD,CAAS9B,QAAT,CAAsB,CACvC,GAAQ+B,CAAAA,OAAR,CAAoBD,MAApB,CAAQC,OAAR,CACAA,OAAO,CAACf,SAAR,CAAkBgB,MAAlB,CAAyB,WAAzB,EACA;AACAD,OAAO,CAACL,gBAAR,CAAyB,UAAzB,CAAqC,SAACO,CAAD,CAAO,CAC1C,GAAIA,CAAC,CAAChC,GAAF,GAAU,OAAd,CAAuBH,MAAM,CAACiC,OAAD,CAAU/B,QAAV,CAAN,CACxB,CAFD,EAGA+B,OAAO,CAACG,KAAR,GACD,CARD,CASA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAC9B,GAAML,CAAAA,MAAM,CAAGrD,MAAM,EAArB,CACAD,SAAS,CAAC,UAAM,CACd,GAAM4D,CAAAA,UAAU,CAAG1C,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAnB,CACA,GAAM0C,CAAAA,WAAW,CAAG3C,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAApB,CACAyC,UAAU,CAACV,gBAAX,CAA4B,OAA5B,CAAqC,iBAAMG,CAAAA,UAAU,CAACC,MAAD,CAAS,MAAT,CAAhB,EAArC,EACAO,WAAW,CAACX,gBAAZ,CAA6B,OAA7B,CAAsC,iBAAMG,CAAAA,UAAU,CAACC,MAAD,CAAS,OAAT,CAAhB,EAAtC,EACA,MAAO,WAAM,CACXM,UAAU,CAACE,mBAAX,CAA+B,OAA/B,CAAwC,iBAAMT,CAAAA,UAAU,CAACC,MAAD,CAAhB,EAAxC,EACAO,WAAW,CAACC,mBAAZ,CAAgC,OAAhC,CAAyC,iBAAMT,CAAAA,UAAU,CAACC,MAAD,CAAhB,EAAzC,EACD,CAHD,CAID,CATQ,CAAT,CAUA,mBACE,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,sBAA7B,CAAoD,GAAG,CAAEA,MAAzD,EADF,CAGD,CAfM","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Functions } from '../body/Functions';\nimport axios from 'axios';\n\nconst addImg = (img, search) => {\n  console.log('바뀜');\n  let book_data = JSON.parse(localStorage.getItem('book'));\n  if (!book_data) book_data = [];\n  removeBackground();\n  Functions().addBook(img, book_data, '');\n  search.value = '';\n};\n\nconst removeBackground = () => {\n  const background = document.querySelector('.background');\n  if (background) background.parentNode.removeChild(background);\n};\n\nconst getApi = async (searchText, category) => {\n  removeBackground();\n  let apiData;\n  if (category === 'book') {\n    const key = '45fe65b5c3fbd3d400ad5daa0f415552';\n    const {\n      data: { documents },\n    } = await axios.get('https://dapi.kakao.com/v3/search/book', {\n      params: {\n        query: searchText.value,\n        size: 3,\n      },\n      headers: {\n        Authorization: 'KakaoAK ' + key,\n      },\n    });\n    apiData = documents;\n  }\n  //   else {\n  // const movieKey = 'ba3df35e-a977-4146-b14a-d57e13e0cfa8';\n  // const data = await axios.get(\n  //   'http://api.kcisa.kr/openapi/service/rest/meta14/getKMPC031801',\n  //   {\n  //     params: {\n  //       serviceKey: movieKey,\n  //       numOfRows: 3,\n  //       title: searchText.value,\n  //     },\n  //   }\n  // );\n  // apiData = movieList;\n  // console.log(data.data.response.body.items.item);\n  //   }\n  const content = document.querySelector('.contents-div').children[0];\n  const background = document.createElement('div');\n  const blurImg = document.createElement('img');\n  background.appendChild(blurImg);\n  background.classList.add('background');\n  blurImg.classList.add('blurImg');\n  content.insertBefore(background, content.firstChild);\n  if (category === 'book') {\n    apiData.forEach((ele) => {\n      const div = document.createElement('div');\n      div.classList.add('preview');\n      const img = document.createElement('img');\n      const text = document.createElement('span');\n      div.appendChild(img);\n      div.appendChild(text);\n      img.src = ele.thumbnail;\n      img.addEventListener('click', () => addImg(ele.thumbnail, searchText));\n      text.innerText = ele.title;\n      background.appendChild(div);\n    });\n  }\n  // else {\n  //   apiData.forEach((ele) => {\n  //     const div = document.createElement('div');\n  //     div.classList.add('preview');\n  //     const img = document.createElement('img');\n  //     const text = document.createElement('span');\n  //     div.appendChild(img);\n  //     div.appendChild(text);\n  //     img.src = ele.thumbnail;\n  //     img.addEventListener('click', () => addImg(ele.thumbnail, searchText));\n  //     text.innerText = ele.title;\n  //     background.appendChild(div);\n  //   });\n  // }\n};\n\nconst showSearch = (target, category) => {\n  const { current } = target;\n  current.classList.toggle('invisible');\n  //   const dropDown = document.querySelector('.dropDown-menu');\n  current.addEventListener('keypress', (e) => {\n    if (e.key === 'Enter') getApi(current, category);\n  });\n  current.focus();\n};\nexport const SearchText = () => {\n  const target = useRef();\n  useEffect(() => {\n    const searchBook = document.querySelector('.dropDown-book');\n    const searchMovie = document.querySelector('.dropDown-movie');\n    searchBook.addEventListener('click', () => showSearch(target, 'book'));\n    searchMovie.addEventListener('click', () => showSearch(target, 'movie'));\n    return () => {\n      searchBook.removeEventListener('click', () => showSearch(target));\n      searchMovie.removeEventListener('click', () => showSearch(target));\n    };\n  });\n  return (\n    <input type=\"text\" className=\"searchText invisible\" ref={target}></input>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}