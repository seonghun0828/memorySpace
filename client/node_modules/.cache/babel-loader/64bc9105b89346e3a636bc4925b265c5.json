{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{Functions}from'../body/Functions';import'./Search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var showOrHide=function showOrHide(menu){var checking=function checking(){return menu.current.classList.toggle('show');};return checking;};window.onclick=function(event){var searchBtn=document.querySelector('.search-icon');var dropDown=document.querySelector('.dropDown-menu');var targetImg=document.querySelector('.clicked-img');var editMenu=document.querySelector('.edit-menu');if(!searchBtn&&!dropDown)return;if(event.target!==searchBtn)dropDown.classList.remove('show');if(!editMenu)return;var editMenuArr=[editMenu,editMenu.children[0],editMenu.children[1]];var isClickEditMenu=editMenuArr.some(function(ele){return ele===event.target;});if(!targetImg||isClickEditMenu)return;// target이 editMenu일 때는 함수 종료\nif(event.target!==targetImg){editMenu.classList.add('invisible');targetImg.classList.remove('clicked-img');}};var useBrowser=function useBrowser(){var element=useRef();var clickbrowser=function clickbrowser(){return element.current.click();};var readFile=function readFile(){var contents=document.querySelector('.contents-div');if(!contents)return;var content=contents.children[0];// book-div or movie-div\nvar file=element.current.files[0];if(!file)return;if(!file.type.startsWith('image/')&&file!==null)window.alert('이미지 파일만 선택해주십시오.');else{var reader=new FileReader();reader.onload=function(){if(content.classList.contains('book-div')){var bookList=JSON.parse(localStorage.getItem('book'));if(!bookList)bookList=[];Functions().addBook(reader.result,bookList,'');}if(content.classList.contains('movie-div')){var movieList=JSON.parse(localStorage.getItem('movie'));if(!movieList)movieList=[];console.log('read',movieList);Functions().addMovie(reader.result,movieList,'');}};reader.readAsDataURL(file);}};useEffect(function(){var current=element.current;current.addEventListener('change',readFile);return function(){return current.removeEventListener('change',readFile);};},[]);return{element:element,clickbrowser:clickbrowser};};var Search=function Search(){var _useBrowser=useBrowser(),element=_useBrowser.element,clickbrowser=_useBrowser.clickbrowser;var dropDown_menu=useRef();var checking=showOrHide(dropDown_menu);return/*#__PURE__*/_jsxs(\"div\",{className:\"dropDown\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-browser\",ref:element}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-icon search-icon\",onClick:checking,children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropDown-menu\",ref:dropDown_menu,children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropDown-book\",children:\"\\uCC45 \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropDown-movie\",children:\"\\uC601\\uD654 \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropDown-browser\",onClick:clickbrowser,children:\"\\uB0B4 \\uCEF4\\uD4E8\\uD130\"})]})]});};export default Search;","map":{"version":3,"sources":["/Users/hoon/Documents/memory_space/src/home/header/Search.js"],"names":["React","useRef","useEffect","Functions","showOrHide","menu","checking","current","classList","toggle","window","onclick","event","searchBtn","document","querySelector","dropDown","targetImg","editMenu","target","remove","editMenuArr","children","isClickEditMenu","some","ele","add","useBrowser","element","clickbrowser","click","readFile","contents","content","file","files","type","startsWith","alert","reader","FileReader","onload","contains","bookList","JSON","parse","localStorage","getItem","addBook","result","movieList","console","log","addMovie","readAsDataURL","addEventListener","removeEventListener","Search","dropDown_menu"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { Functions } from '../body/Functions';\nimport './Search.css';\n\nconst showOrHide = (menu) => {\n  const checking = () => menu.current.classList.toggle('show');\n  return checking;\n};\n\nwindow.onclick = (event) => {\n  const searchBtn = document.querySelector('.search-icon');\n  const dropDown = document.querySelector('.dropDown-menu');\n  const targetImg = document.querySelector('.clicked-img');\n  const editMenu = document.querySelector('.edit-menu');\n  if (!searchBtn && !dropDown) return;\n  if (event.target !== searchBtn) dropDown.classList.remove('show');\n  if (!editMenu) return;\n  const editMenuArr = [editMenu, editMenu.children[0], editMenu.children[1]];\n  const isClickEditMenu = editMenuArr.some((ele) => ele === event.target);\n  if (!targetImg || isClickEditMenu) return; // target이 editMenu일 때는 함수 종료\n  if (event.target !== targetImg) {\n    editMenu.classList.add('invisible');\n    targetImg.classList.remove('clicked-img');\n  }\n};\n\nconst useBrowser = () => {\n  const element = useRef();\n  const clickbrowser = () => element.current.click();\n  const readFile = () => {\n    const contents = document.querySelector('.contents-div');\n    if (!contents) return;\n    const content = contents.children[0]; // book-div or movie-div\n    const file = element.current.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/') && file !== null)\n      window.alert('이미지 파일만 선택해주십시오.');\n    else {\n      const reader = new FileReader();\n      reader.onload = function () {\n        if (content.classList.contains('book-div')) {\n          let bookList = JSON.parse(localStorage.getItem('book'));\n          if (!bookList) bookList = [];\n          Functions().addBook(reader.result, bookList, '');\n        }\n        if (content.classList.contains('movie-div')) {\n          let movieList = JSON.parse(localStorage.getItem('movie'));\n          if (!movieList) movieList = [];\n          console.log('read', movieList);\n          Functions().addMovie(reader.result, movieList, '');\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  useEffect(() => {\n    const { current } = element;\n    current.addEventListener('change', readFile);\n    return () => current.removeEventListener('change', readFile);\n  }, []);\n  return { element, clickbrowser };\n};\n\nconst Search = () => {\n  const { element, clickbrowser } = useBrowser();\n  const dropDown_menu = useRef();\n  const checking = showOrHide(dropDown_menu);\n  return (\n    <div className=\"dropDown\">\n      {/* <input type=\"text\" className=\"searchText\"></input> */}\n      <input type=\"file\" id=\"file-browser\" ref={element} />\n      <button className=\"nav-icon search-icon\" onClick={checking}>\n        🔍\n      </button>\n      <div className=\"dropDown-menu\" ref={dropDown_menu}>\n        <div className=\"dropDown-book\">책 검색</div>\n        <div className=\"dropDown-movie\">영화 검색</div>\n        <div className=\"dropDown-browser\" onClick={clickbrowser}>\n          내 컴퓨터\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}