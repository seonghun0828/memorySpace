{"ast":null,"code":"import React,{useEffect}from'react';import{Functions}from'./Functions';import'./MemoSpace.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var removeAlarm=function removeAlarm(memoNav){memoNav.removeChild(memoNav.lastChild);};var addAlarm=function addAlarm(){var memoNav=document.querySelector('.memo-nav');// deleteBtn, space, saveBtn, space => 4개\nif(memoNav.childNodes.length!==4)return;var alarm=document.createElement('span');alarm.classList.add('savingMemoAlarm');alarm.innerText='저장되었습니다';memoNav.appendChild(alarm);setTimeout(function(){return removeAlarm(memoNav);},2000);};var saveMemo=function saveMemo(category,id){var contents=document.querySelector('.contents-div');var memoSpace=document.querySelector('.memo-space').children[0];if(!contents)return;if(category==='book'){var book_data=JSON.parse(localStorage.getItem('book'));var index=Object.keys(book_data).find(function(key){return book_data[key].id===parseInt(id);});book_data[index].memo=memoSpace.value;Functions().saveImg(category,book_data);}else{var movie_data=JSON.parse(localStorage.getItem('movie'));var _index=Object.keys(movie_data).find(function(key){return movie_data[key].id===parseInt(id);});movie_data[_index].memo=memoSpace.value;Functions().saveImg(category,movie_data);}addAlarm();};var readMemo=function readMemo(category,id){var memoSpace=document.querySelector('.memo-space');var textArea=memoSpace.children[0];var data=JSON.parse(localStorage.getItem(category));var index=Object.keys(data).find(function(key){return data[key].id===parseInt(id);});textArea.value=data[index].memo;};var MemoSpace=function MemoSpace(props){var prop_state=props.location.state;var category=prop_state.category;useEffect(function(){// clicked id 임시방편 나중에 바꾸기\nvar id=document.querySelector('.contents-div').clicked_id;var saveBtn=document.querySelector('.save-btn');readMemo(category,id);saveBtn.addEventListener('click',function(){return saveMemo(category,id);});return saveBtn.removeEventListener('click',function(){return saveMemo(category,id);});});return/*#__PURE__*/_jsxs(\"div\",{className:\"memo-div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"memo-nav\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-btn\",onClick:props.history.goBack,children:/*#__PURE__*/_jsx(\"img\",{src:\"images/close-button.png\",alt:\"close\",className:\"close-btn\"})}),\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"save-btn\",children:/*#__PURE__*/_jsx(\"img\",{src:\"images/check-mark.png\",alt:\"save\",className:\"save-btn\"})}),\"\\xA0\\xA0\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-space\",children:/*#__PURE__*/_jsx(\"textarea\",{spellCheck:\"false\"})})]});};export default MemoSpace;","map":{"version":3,"sources":["/Users/hoon/Documents/memory_space/src/home/body/MemoSpace.js"],"names":["React","useEffect","Functions","removeAlarm","memoNav","removeChild","lastChild","addAlarm","document","querySelector","childNodes","length","alarm","createElement","classList","add","innerText","appendChild","setTimeout","saveMemo","category","id","contents","memoSpace","children","book_data","JSON","parse","localStorage","getItem","index","Object","keys","find","key","parseInt","memo","value","saveImg","movie_data","readMemo","textArea","data","MemoSpace","props","prop_state","location","state","clicked_id","saveBtn","addEventListener","removeEventListener","history","goBack"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Functions } from './Functions';\nimport './MemoSpace.css';\n\nconst removeAlarm = (memoNav) => {\n  memoNav.removeChild(memoNav.lastChild);\n};\nconst addAlarm = () => {\n  const memoNav = document.querySelector('.memo-nav');\n  // deleteBtn, space, saveBtn, space => 4개\n  if (memoNav.childNodes.length !== 4) return;\n  const alarm = document.createElement('span');\n  alarm.classList.add('savingMemoAlarm');\n  alarm.innerText = '저장되었습니다';\n  memoNav.appendChild(alarm);\n  setTimeout(() => removeAlarm(memoNav), 2000);\n};\n\nconst saveMemo = (category, id) => {\n  const contents = document.querySelector('.contents-div');\n  const memoSpace = document.querySelector('.memo-space').children[0];\n  if (!contents) return;\n  if (category === 'book') {\n    const book_data = JSON.parse(localStorage.getItem('book'));\n    const index = Object.keys(book_data).find(\n      (key) => book_data[key].id === parseInt(id)\n    );\n    book_data[index].memo = memoSpace.value;\n    Functions().saveImg(category, book_data);\n  } else {\n    const movie_data = JSON.parse(localStorage.getItem('movie'));\n    const index = Object.keys(movie_data).find(\n      (key) => movie_data[key].id === parseInt(id)\n    );\n    movie_data[index].memo = memoSpace.value;\n    Functions().saveImg(category, movie_data);\n  }\n  addAlarm();\n};\n\nconst readMemo = (category, id) => {\n  const memoSpace = document.querySelector('.memo-space');\n  const textArea = memoSpace.children[0];\n  const data = JSON.parse(localStorage.getItem(category));\n  const index = Object.keys(data).find((key) => data[key].id === parseInt(id));\n  textArea.value = data[index].memo;\n};\n\nconst MemoSpace = (props) => {\n  const prop_state = props.location.state;\n  const category = prop_state.category;\n  useEffect(() => {\n    // clicked id 임시방편 나중에 바꾸기\n    const id = document.querySelector('.contents-div').clicked_id;\n    const saveBtn = document.querySelector('.save-btn');\n    readMemo(category, id);\n    saveBtn.addEventListener('click', () => saveMemo(category, id));\n    return saveBtn.removeEventListener('click', () => saveMemo(category, id));\n  });\n  return (\n    <div className=\"memo-div\">\n      <div className=\"memo-nav\">\n        <span className=\"close-btn\" onClick={props.history.goBack}>\n          <img\n            src=\"images/close-button.png\"\n            alt=\"close\"\n            className=\"close-btn\"\n          />\n        </span>\n        &nbsp;&nbsp;\n        <span className=\"save-btn\">\n          <img src=\"images/check-mark.png\" alt=\"save\" className=\"save-btn\" />\n        </span>\n        &nbsp;&nbsp;\n      </div>\n      <div className=\"memo-space\">\n        <textarea spellCheck=\"false\"></textarea>\n      </div>\n    </div>\n  );\n};\n\nexport default MemoSpace;\n"]},"metadata":{},"sourceType":"module"}